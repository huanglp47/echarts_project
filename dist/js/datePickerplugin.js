jQuery(function(t){t.datepicker.regional["zh-CN"]={closeText:"关闭",prevText:"",nextText:"",currentText:"今天",monthNames:["01","02","03","04","05","06","07","08","09","10","11","12"],monthNamesShort:["一","二","三","四","五","六","七","八","九","十","十一","十二"],dayNames:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],dayNamesShort:["周日","周一","周二","周三","周四","周五","周六"],dayNamesMin:["日","一","二","三","四","五","六"],weekHeader:"周",dateFormat:"yymmdd",firstDay:1,isRTL:!1,showMonthAfterYear:!0,yearSuffix:"."},t.datepicker.setDefaults(t.datepicker.regional["zh-CN"])});var myDatePicker=function(){function t(t){this.target=t.targetClass,this.input=t.input||$("input"),this.slectContainer="J_dp_container",this.ajaxCallBack=t.ajaxCallBack||function(){},this.init()}function e(t){this.input=t.input||"input",this.slectContainer="J_dp_container",this.congifArr=t.congifArr||[],this.ajaxCallBack=t.ajaxCallBack||function(){},this.callback=t.callback||function(){},this.init()}var a=a||{};a.isArray=function(t){return Array.isArray(t)||"[object Array]"===Object.prototype.toString.call(t)},a.getToday=function(t,e){var n=t?new Date(t):new Date,e=e?e:"";return n.getFullYear()+e+a.isBelowTen(n.getMonth()+1)+e+a.isBelowTen(n.getDate())},a.isBelowTen=function(t){var t=parseInt(t,10);return 10>t?"0"+t:t};var n='<li data-startDay="{startDay}" data-endDay="{endDay}">{selectDayText}</li>',i='<div id="datePickerPanel" style=""><div id="datepickerStart"></div><div id="datepickerEnd"></div></div>',r='<a class="customhref" href="#">自选</a>'+i;return t.prototype={init:function(){var t=this.input,e=null,a=null,n=this,i=$("#datepickerStart"),r=$("#datepickerEnd");this.createDatePicker(i,function(t,a,n){return r.datepicker("option","minDate",t),e=t,!1}),this.createDatePicker(r,function(r,c,s){return i.datepicker("option","maxDate",r),a=r,e&&a&&(t.val(e+"-"+a).attr({"data-start":e,"data-end":a}),$("."+this.slectContainer).hide(),$("#datePickerPanel").hide(),$(".J_dp_container").hide(),n.ajaxCallBack&&n.ajaxCallBack()),!1})},createDatePicker:function(t,e){t.datepicker({dateFormat:"yymmdd",inline:!0,maxDate:0,onSelect:function(t,a,n){e(t,a,n)}})}},e.prototype={init:function(){this.render(),this.bindEvent()},getDayDescrption:function(){var t={1:function(){return"今天"},7:function(){return"过去一周"},15:function(){return"过去半个月"},30:function(){return"过去一个月"},60:function(){return"过去两个月"},90:function(){return"过去三个月"}},e=function(e){return t[e]?t[e]&&t[e]():"过去"+e+"天"};return{show:e}},getconfigMap:function(){var t=null,e=null,n=[],i=0,r=a.getToday();if(this.congifArr&&a.isArray(this.congifArr)){t=this.congifArr.length;for(var c=0;t>c;c++)this.congifArr[c]&&(e=this.getDayAgo(this.congifArr[c]),i=this.getDayDescrption().show(this.congifArr[c]),n.push({selectDayText:i,startDay:e,endDay:r}));return n}},getDayAgo:function(t){var t=parseInt(t,10),e=864e5,n=new Date;return t>0?a.getToday(n-(t-1)*e):a.getToday()},render:function(){var t="",e="",a=0,i=this.getconfigMap();if(a=i.length){for(var c=0;a>c;c++)t+=n.replace(/{startDay}/,i[c].startDay).replace(/{endDay}/,i[c].endDay).replace(/{selectDayText}/,i[c].selectDayText);e="<ul>"+t+"</ul>"+r,$("."+this.input).parent().append('<div class="dp-container J_dp_container">'+e+"</div>")}else $("."+this.input).parent().append('<div class="dp-container J_dp_container">'+r+"</div>");$("."+this.input).parent().css({position:"relative",display:"inline-block"}),$(".J_dp_container").css({width:$("."+this.input).css("width"),right:"0px"})},hideDateSelectPanel:function(){$("."+this.slectContainer).hide(),$("#datePickerPanel").hide()},showDateSelectPanel:function(){$("."+this.slectContainer).show()},bindEvent:function(){var e=this,a=$("."+this.input),n=$("."+this.slectContainer),i=$(".customhref");a.on("click",function(){$("#datePickerPanel").hide(),n.show(),e.callback&&e.callback()}),n.on("click","li",function(){var t=$(this),i=t.attr("data-startday"),r=t.attr("data-endday");a.val(i+"-"+r).attr({"data-start":i,"data-end":r}),n.hide(),e.ajaxCallBack&&e.ajaxCallBack()}),i.on("click",function(){$("#datePickerPanel").show(),new t({input:a,targetClass:"datePickPlaceholder",ajaxCallBack:e.ajaxCallBack})}),$(document).on("click",function(t){var a=$(t.target);return a.parents("table.ui-datepicker-calendar").length>0||a.parents("#datePickerPanel").length>0||a.parents(".ui-datepicker-header").length>0?!1:void(a.hasClass(e.input)||a.parents().hasClass(e.slectContainer)||e.hideDateSelectPanel())})}},e}();